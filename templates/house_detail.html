{% extends 'base.html' %} {% load static %} {% block desc %} {{ block.super }}
<meta
  name="description"
  content="Find your perfect PG room with Casa Living. Safe, spacious, and vibrant homes designed for you."
/>
{% endblock %} {% block title %}Our Rooms{% endblock title %} {% block css %} {{
block.super }}
<link
  href="{% static 'css/house_detail.css' %}"
  rel="stylesheet"
  type="text/css"
/>
{% endblock %} {% block content %} 
{% if messages %}
<div class="container mt-3">
  {% for message in messages %}
  <div
    class="alert alert-{{ message.tags }} alert-dismissible fade show"
    role="alert"
  >
    {{ message }}
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>
  {% endfor %}
</div>
{% endif %}

<section  style="background-image: linear-gradient(to right, #ffecd2, #ffeae3) !important;">

<section class="py-0 pt-sm-5">
  <div class="container position-relative">
    <!-- Title and button START -->
    <div class="row mb-3">
      <div class="col-12">
        <!-- Meta -->
        <div class="d-lg-flex justify-content-lg-between mb-1">
          <!-- Title -->
          <div class="mb-2 mb-lg-0">
            <h1 class="fs-2" style="color:rgb(138, 78, 19)!important; font-weight: 600">{{ house.title }}</h1>
          </div>
        </div>
      </div>
    </div>
    <!-- Title and button END -->

    <!-- Alert box START -->

    <!-- Alert box END -->
  </div>
</section>
<section class="card-grid pt-0">
  <div class="container">
    <div class="row g-2">
      {% with house.houseImage.all as images %} {% if images|length > 0 %}
      <!-- Large image -->
      <div class="col-md-6">
        <a data-glightbox data-gallery="gallery" href="">
          <div
            class="card card-grid-lg card-element-hover card-overlay-hover overflow-hidden"
            style="background-image:url('{{ images.0.image.url }}'); background-position: center left; background-size: cover; height: 400px;"
          >
            <div class="hover-element position-absolute w-100 h-100">
              <i
                class="bi bi-fullscreen fs-6 text-white position-absolute top-50 start-50 translate-middle bg-dark rounded-1 p-2 lh-1"
              ></i>
            </div>
          </div>
        </a>
      </div>

      <div class="col-md-6">
        <div class="row g-2">
          <!-- Medium image -->
          {% if images|length > 1 %}
          <div class="col-12">
            <a data-glightbox data-gallery="gallery" href="">
              <div
                class="card card-grid-sm card-element-hover card-overlay-hover overflow-hidden"
                style="background-image:url('{{ images.1.image.url }}'); background-position: center left; background-size: cover; height: 195px;"
              >
                <div class="hover-element position-absolute w-100 h-100">
                  <i
                    class="bi bi-fullscreen fs-6 text-white position-absolute top-50 start-50 translate-middle bg-dark rounded-1 p-2 lh-1"
                  ></i>
                </div>
              </div>
            </a>
          </div>
          {% endif %}

          <!-- Small third image -->
          {% if images|length > 2 %}
          <div class="col-md-6">
            <a data-glightbox data-gallery="gallery" href="">
              <div
                class="card card-grid-sm card-element-hover card-overlay-hover overflow-hidden"
                style="background-image:url('{{ images.2.image.url }}'); background-position: center left; background-size: cover; height: 195px;"
              >
                <div class="hover-element position-absolute w-100 h-100">
                  <i
                    class="bi bi-fullscreen fs-6 text-white position-absolute top-50 start-50 translate-middle bg-dark rounded-1 p-2 lh-1"
                  ></i>
                </div>
              </div>
            </a>
          </div>
          {% endif %}

          <!-- 4th image with View All overlay -->
          {% if images|length > 3 %}
          <div class="col-md-6">
            <div
              class="card card-grid-sm overflow-hidden"
              style="background-image:url('{{ images.3.image.url }}'); background-position: center left; background-size: cover; height: 195px; cursor: pointer;"
              data-bs-toggle="modal"
              data-bs-target="#imageCarouselModal"
            >
              <div class="bg-overlay bg-dark opacity-7"></div>
              <div class="card-img-overlay d-flex h-100 w-100">
                <h6
                  class="card-title m-auto fw-light text-decoration-underline text-white"
                >
                  View all
                </h6>
              </div>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
      {% endif %} {% endwith %}
    </div>
  </div>
</section>

<!-- Modal with Carousel -->
<div
  class="modal fade"
  id="imageCarouselModal"
  tabindex="-1"
  aria-labelledby="imageCarouselLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content bg-black">
      <div class="modal-body p-0">
        <div
          id="carouselGallery"
          class="carousel slide"
          data-bs-ride="carousel"
        >
          <div class="carousel-inner">
            {% with house.houseImage.all as images %} {% for image in images %}
            <div class="carousel-item {% if forloop.first %}active{% endif %}">
              <img
                src="{{ image.image.url }}"
                class="d-block w-100"
                alt="Image {{ forloop.counter }}"
              />
            </div>
            {% endfor %} {% endwith %}
          </div>
          <button
            class="carousel-control-prev"
            type="button"
            data-bs-target="#carouselGallery"
            data-bs-slide="prev"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button
            class="carousel-control-next"
            type="button"
            data-bs-target="#carouselGallery"
            data-bs-slide="next"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<br />
<br />

<section class="pt-0">
  <div class="container" data-sticky-container="">
    <div class="row g-4 g-xl-5">
      <!-- Content START -->
      <div class="col-xl-7 order-1">
        <div class="vstack gap-5">
          <!-- About hotel START -->
          <div class="bg-transparent">
            <!-- Card header -->
            <div class="bg-transparent px-0 pt-0">
              <h3 class="mb-0" style="color:rgb(138, 78, 19)!important; font-weight: 600">About This PG House</h3>
            </div>

            <!-- Card body START -->
            <div class="card-body pt-4 p-0">
              <h5 class="fw-light mb-4">Amenities</h5>

             
              <div class="amenities">
                {% for r in house.amenities.all %}
                <span class="badge badge-amen ">{{ r.tag.name }}</span>
                {% endfor %}
              </div>

              <br>

              <div class="description-preview">
  

  
    <p class="mb-0">{{ house.description }}</p>
  

 
</div>

            </div>
            <!-- Card body END -->
          </div>
          <!-- About hotel START -->

          <!-- Room START -->
         
          <!-- Room END -->
        </div>
      </div>
      <!-- Content END -->

      <!-- Right side content START -->
      <aside class="col-xl-5 order-xl-2">
        <div
          data-sticky=""
          data-margin-top="100"
          data-sticky-for="1199"
          style=""
        >
          <!-- Book now START -->
          <div class="card card-body border">
            <iframe
              src="{{ house.location }}"
              height="450"
              style="border: 0"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
            ></iframe>
          </div>
          <!-- Book now END -->

          <!-- Best deal START -->
        
        
        </div>
      </aside>
      <!-- Right side content END -->
    </div>
    <!-- Row END -->
  </div>
</section>


<div class="container py-5">
    <h2
      class="mb-5"
      style="color: rgb(138, 78, 19) !important; font-weight: 600"
    >
      <span class="position-relative d-inline-block"
        >Our Rooms
        <!-- SVG decoration -->
        <span
          class="position-absolute top-50 start-50 translate-middle z-index-n1"
        >
          <svg
            class="fill-orange"
            width="180"
            height="86"
            viewBox="0 0 303 86"
          >
            <path
              d="M288.197 19.3999C281.599 15.6998 273.654 13.03 265.424 10.926C256.533 8.64794 247.263 6.92124 237.946 5.4267C218.461 2.249 198.384 0.406219 178.237 0.0579769C158.609 -0.275755 138.888 0.8125 119.733 3.49686C108.17 5.10748 96.8189 7.2985 85.8466 10.0264C81.4955 11.0131 77.168 12.0723 72.9115 13.2331C56.382 17.7022 40.5146 23.4192 26.3972 30.355C12.9182 36.9861 0.716203 46.0404 0.999971 57.2131C1.14185 62.2772 4.16871 67.051 9.98595 70.693C15.4721 74.1319 22.6846 76.3809 29.9679 78.0206C38.7647 80.0085 48.0345 81.3289 57.257 82.4026C67.1179 83.5489 77.0734 84.2889 87.0762 84.6807C107.413 85.4642 127.892 84.7968 148.063 83.0266C168.399 81.2418 188.429 78.3543 208.127 74.8139C227.399 71.3459 246.436 67.2976 265.141 62.8285C278.927 59.5348 294.227 55.0802 300.446 46.2435C307.091 36.812 299.949 25.973 288.197 19.3999ZM298.862 46.7804C295.48 50.9593 289.592 54.0935 283.207 56.4876C276.633 58.9543 269.468 60.7391 262.279 62.4077C252.915 64.5843 243.503 66.6737 234.044 68.6616C215.174 72.6083 196.019 76.0762 176.534 78.7171C157.191 81.3289 137.54 83.0991 117.747 83.6505C97.9304 84.2019 77.9957 83.5634 58.4866 81.3289C49.5243 80.2987 40.5146 79.0363 31.907 77.1645C24.5764 75.5829 17.3403 73.4499 11.6649 70.1126C5.49296 66.4561 2.15869 61.5226 2.22963 56.2555C2.32422 50.7417 5.72943 45.489 10.9555 41.0489C16.1106 36.6959 22.7319 33.0974 29.6842 29.8472C36.2108 26.8145 43.0213 24.0141 50.0918 21.4748C48.4601 22.1278 46.8521 22.7953 45.2678 23.4772C37.7716 26.684 30.4409 30.1664 23.9615 34.1131C17.695 37.9438 12.1615 42.3839 9.30018 47.5785C6.55709 52.5554 6.10779 58.1853 9.77313 63.0462C13.0838 67.4427 19.303 70.7655 26.279 72.8985C34.6974 75.4813 44.2036 76.2358 53.497 76.381C63.8309 76.5406 74.2357 76.1488 84.5696 75.757C95.0454 75.3652 105.497 74.7993 115.926 74.0884C136.783 72.6664 157.545 70.6204 178.071 67.9361C187.956 66.6447 197.817 65.2227 207.583 63.6411C208.269 63.525 208.718 62.3642 208.009 62.4658C188.358 65.629 168.447 68.2118 148.394 70.2142C128.435 72.202 108.312 73.624 88.1404 74.4366C78.0666 74.8429 67.9219 75.1911 57.8008 75.2056C48.3419 75.2201 38.6465 74.7558 29.8261 72.5068C22.5427 70.6785 15.8032 67.6169 11.8777 63.3509C7.33745 58.4175 7.52663 52.4393 10.6481 47.2302C13.7695 41.9776 19.7523 37.581 26.3263 33.8084C32.7583 30.1083 39.8289 26.7855 47.1359 23.7529C59.2197 18.7034 72.2257 14.4955 85.7756 11.1292C90.7889 9.99737 95.8494 8.98167 100.981 8.08205C117.96 5.07846 135.553 3.32274 153.218 2.88744C161.754 2.66979 170.315 2.78587 178.851 3.19215C179.537 3.22117 180.128 2.06037 179.277 2.01684C167.69 1.45094 156.032 1.47996 144.468 2.06037C145.745 1.97331 146.999 1.88625 148.275 1.8137C167.879 0.6674 187.696 1.04466 207.157 2.78587C226.075 4.46904 245.111 7.25497 262.894 11.608C278.714 15.4677 294.085 21.6635 299.808 32.0092C302.456 36.812 302.574 42.1662 298.862 46.7804Z"
            ></path>
          </svg>
        </span>
      </span>
    </h2>

    

    <div class="row gy-5">
      {% for room in rooms %}
      <div class="col-12">
        <div
          class="room-card d-flex flex-column flex-md-row align-items-start"
        >
          <!-- Image Section -->

          <div class="room-image">
            {% if room.images.all %}
            <div
              id="carouselRoom{{ room.id }}"
              class="carousel slide"
              data-bs-ride="carousel"
            >
              <div class="carousel-inner">
                {% for img in room.images.all %}
                <div
                  class="carousel-item {% if forloop.first %}active{% endif %}"
                >
                  <img
                    src="{{ img.image.url }}"
                    class="d-block w-100"
                    alt="Room Image"
                  />
                </div>
                {% endfor %}
              </div>
              {% if room.images.count > 1 %}
              <button
                class="carousel-control-prev"
                type="button"
                data-bs-target="#carouselRoom{{ room.id }}"
                data-bs-slide="prev"
              >
                <span
                  class="carousel-control-prev-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button
                class="carousel-control-next"
                type="button"
                data-bs-target="#carouselRoom{{ room.id }}"
                data-bs-slide="next"
              >
                <span
                  class="carousel-control-next-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Next</span>
              </button>
              {% endif %}
            </div>
            {% else %}
            <img
              src="{% static 'images/image.png' %}"
              class="img-fluid"
              alt="Default Room Image"
            />
            {% endif %}
          </div>

          <!-- Text Section -->
          <div class="room-details px-4 py-3">
            <h4
              style="color: rgb(0, 0, 0) !important; font-weight: 600"
            >
              {{ room.name }}
            </h4>
            <p class="room-description">
              {{ room.description|linebreaksbr }}
            </p>

            <!-- Amenities tags -->
            <div class="amenities">
              {% for r in house.amenities.all %}
              <span class="badge badge-amen ">{{ r.tag.name }}</span>
              {% endfor %}
            </div>

            <div class="button-group mt-4">
              <!-- Button to trigger modal -->
              <btn
                href=""
                class="btn custom-btn mb-0"
                data-bs-toggle="modal"
                data-bs-target="#scheduleVisitModal{{ room.id }}"
              >
                Book room
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  fill="none"
                  stroke="#F5EEDD"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="feather feather-arrow-right ms-2"
                >
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                  <polyline points="12 5 19 12 12 19"></polyline>
                </svg>
              </a>
              {% comment %}
              <button
                class="btn-visit"
                data-bs-toggle="modal"
                data-bs-target="#scheduleVisitModal{{ room.id }}"
              >
                Contact
              </button>
              {% endcomment %}
            </div>
          </div>
        </div>
      </div>

      <!-- Modal for scheduling visit -->
      <div
        class="modal fade"
        id="scheduleVisitModal{{ room.id }}"
        tabindex="-1"
        aria-labelledby="scheduleVisitModalLabel{{ room.id }}"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5
                class="modal-title"
                id="scheduleVisitModalLabel{{ room.id }}"
              >
                Contact us
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <form
                method="POST"
                action="{% url 'home_schedule_visit' %}"
                class="contact-form"
              >
                {% csrf_token %}
                <input
                  type="hidden"
                  name="room_id"
                  value="{{ room.id }}"
                />
                <div class="mb-3">
                  <label for="full_name" class="form-label"
                    >Full Name</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="full_name"
                    name="full_name"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="email" class="form-label"
                    >Email Address</label
                  >
                  <input
                    type="email"
                    class="form-control"
                    id="email"
                    name="email"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="contact_number" class="form-label"
                    >Phone Number</label
                  >
                  <input
                    type="tel"
                    class="form-control"
                    id="contact_number"
                    name="contact_number"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="message" class="form-label"
                    >Message (Optional)</label
                  >
                  <textarea
                    class="form-control"
                    id="message"
                    name="message"
                  ></textarea>
                </div>
                <button type="submit" class="btn  w-100" style="color:rgb(138, 78, 19)!important; font-weight: 600; background-color: linear-gradient(to right, #ffecd2, #fcb69f) !important;">
                  Submit
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>
 {% endblock content %} 
<script>
  const successPopup = new bootstrap.Modal(document.getElementById('success-popup'));
  const errorPopup = new bootstrap.Modal(document.getElementById('error-popup'));

  {% if messages %}
    {% for message in messages %}
      if ("{{ message.tags }}" === "success") {
        successPopup.show();
      } else if ("{{ message.tags }}" === "error") {
        errorPopup.show();
      }
    {% endfor %}
  {% endif %}
</script>

